<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
    <title>Product Page</title>
</head>
<body>
   
    <button type="button" onclick="searchProducts()">Search</button>
    
    <div id="results"></div>

    <div class="product-container" id="productContainer"></div>
    <script>
        
        // all product display
            document.addEventListener('DOMContentLoaded', function () {
            // Fetch product data from the server
            fetch('/api/products')
                .then(response => response.json())
                .then(products => displayProducts(products))
                .catch(error => console.error('Error:', error));

            function displayProducts(products) {
                const productContainer = document.getElementById('productContainer');

                products.forEach(product => {
                    const productDiv = document.createElement('div');
                    productDiv.classList.add('product');
                    productDiv.innerHTML=`<h2> ${product.title}</h2>
                    <h1>${product.images}</h1>
                    <img src= "images/${product.images}" width="100px"/>
                    <p>price: ${product.description}</p>`
                    
                    
        
                    productContainer.appendChild(productDiv);
                });


           
            }

               

            // Function to simulate adding to cart
            window.addToCart = function (productId) {
                alert(`Product ${productId} added to cart!`);
            };




        });

        function searchProducts() {
            //const searchInput = document.getElementById('searchInput');
            const query = 599;

            fetch(`/search?q=${query}`)
                .then(response => response.json())
                .then(results => displayResults(results))
                .catch(error => console.error('Error:', error));
        }

        function displayResults(results) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';

            
            results.forEach(product => {
                    const productDiv = document.createElement('div');
                    productDiv.classList.add('product');
                    productDiv.innerHTML=`<h2> ${product.title}</h2>
                    <h1>${product.images}</h1>
                    <img src= "images/${product.images}" width="100px"/>
                    <p>price: ${product.description}</p>`
                    
                    
        
                    resultsDiv.appendChild(productDiv);
            });

            
        }
    </script>
</body>
</html>
